<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:body>

	<ui:composition template="../template/common.xhtml">

		<ui:define name="content">
		
				<p:panel>

				<p:outputLabel value="Riepilogo pacchetto personalizzato" />
				
				
		<h:form id="form1">  
              
    <p:dataGrid value="#{riepilogoBean.hotels}" var="hotel" id="hotel"  
        paginator="true" rows="5"  
        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
        rowsPerPageTemplate="5,10,15" type="none">  
  
  			<f:facet name="header">  
            	    Hotel prenotati 
            	</f:facet> 
            
      <p:panel header="Id hotel: #{hotel.idProdBase}" style="text-align:center">  
            <h:panelGrid columns="1" style="width:100%">  
              <p:graphicImage width="50" height="50" value="/resources/images/hotel.jpg"/> 
              
  
                <h:outputText value="#{hotel.citta}, #{hotel.stelle}" style="margin-left:10px" />  

            <p:commandLink value = "Mostra Dettagli" update=":form1:dettagliHotel" oncomplete="PF('hotelDialog').show()" title="View Detail">  
                <f:setPropertyActionListener value="#{hotel}" target="#{riepilogoBean.selectedHotel}" />  
            </p:commandLink>  
  
            </h:panelGrid>  
        </p:panel>  
    </p:dataGrid>  
      
    <p:dialog header="Dettagli Hotel" widgetVar="hotelDialog" modal="true" showEffect="fade">  
        <p:outputPanel id="dettagliHotel" style="text-align:center;" layout="block">  
              
            <h:panelGrid  columns="2" cellpadding="5">  
                <h:outputLabel value="Descrizione: " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.descrizione}" />  
                  
                <h:outputLabel value="Citta': " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.citta}" />  
                  
                 <h:outputLabel value="Data/ora inizio prenotazione: " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.dataPartenza}" />  
                
                 <h:outputLabel value="Data/ora fine prenotazione): " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.dataRitorno}" />  
                
                 <h:outputLabel value="Costo: " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.costo}" />  
                
              <p:panel rendered="#{riepologoBean.pacchetto.listaRegali}" >  
                <h:outputLabel value = "Dalla tua lista regali, il prodotto :"/>
                <h:outputText value ="#{riepilogoBean.isHotelAcquistato}" />
             </p:panel>   
            </h:panelGrid>  
        </p:outputPanel>  
    </p:dialog>  
  
</h:form>  

	<br/> <br/>
		<h:form id="form2">  
              
    <p:dataGrid value="#{riepilogoBean.hotels}" var="hotel" id="hotel"  
        paginator="true" rows="5"  
        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
        rowsPerPageTemplate="5,10,15" type="none">  
  
             <p:panel header="Id trasporto: #{trasporto.idProdBase}" style="text-align:center">  
            <h:panelGrid columns="1" style="width:100%">  
              <p:graphicImage width="50" height="50" value="/resources/images/hotel.jpg"/> 
              
              <h:outputText value="#{trasporto.citta}, #{trasporto.stelle}" style="margin-left:10px" />  
            <p:commandLink value = "Mostra Dettagli" update=":form2:dettagliTrasporto" oncomplete="PF('trasportoDialog').show()" title="View Detail">  
                <f:setPropertyActionListener value="#{trasporto}" target="#{riepilogoBean.selectedTrasporto}" />  
            </p:commandLink>  

    </h:panelGrid>  
    </p:panel>
    </p:dataGrid>
      
    <p:dialog header="Dettagli Trasporto" widgetVar="trasportoDialog" modal="true" showEffect="fade">  
        <p:outputPanel id="dettagliTrasporto" style="text-align:center;" layout="block">  
              
            <h:panelGrid  columns="2" cellpadding="5">  
                <h:outputLabel value="Descrizione: " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.descrizione}" />  
                  
                <h:outputLabel value="Citta partenza': " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.cittaPartenza}" />  
                  
                 <h:outputLabel value="Data/ora partenza: " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.dataPartenza}" />  
                
                <h:outputLabel value="Citta arrivo': " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.cittaRitorno}" />  
                
                 <h:outputLabel value="Data/ora arrivo): " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.dataRitorno}" />  
                
                 <h:outputLabel value="Costo: " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.costo}" />  
                
            </h:panelGrid>  
        </p:outputPanel>  
    </p:dialog>  
  
</h:form>  
	<br /> <br/>
	<h:form id="form3">  
              
    <p:dataGrid value="#{riepilogoBean.escursioni}" var="escursione" id="escursione"  
        paginator="true" rows="5"  
        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
        rowsPerPageTemplate="5,10,15" type="none">  
  
          <p:panel header="Id escursione: #{escursione.idProdBase}" style="text-align:center">  
            <h:panelGrid columns="1" style="width:100%">  
              <p:graphicImage width="50" height="50" value="/resources/images/hotel.jpg"/> 
              
             <h:outputText value="#{escursione.luogo}" style="margin-left:10px" />  
          
            <p:commandLink value = "Mostra Dettagli" update=":form3:dettagliEscursione" oncomplete="PF('escursioneDialog').show()" title="View Detail">  
                <f:setPropertyActionListener value="#{escursione}" target="#{riepilogoBean.selectedEscursione}" />  
            </p:commandLink>  
            
           </h:panelGrid>
           </p:panel>
    </p:dataGrid>  
      
    <p:dialog header="Dettagli Escursione" widgetVar="escursioneDialog" modal="true" showEffect="fade">  
        <p:outputPanel id="dettagliEscursione" style="text-align:center;" layout="block">  
              
            <h:panelGrid  columns="2" cellpadding="5">  
                <h:outputLabel value="Descrizione: " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.descrizione}" />  
                  
                <h:outputLabel value="Citta': " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.luogo}" />  
                  
                 <h:outputLabel value="Data/ora inizio prenotazione: " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.dataPartenza}" />  
                
                 <h:outputLabel value="Data/ora fine prenotazione): " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.dataRitorno}" />  
                
                 <h:outputLabel value="Costo: " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.costo}" />  
                
            </h:panelGrid>  
        </p:outputPanel>  
    </p:dialog>  
  </h:form>

      <br/> <br/> <br/>      		
      			<p:growl id="messaggi"/>
      			
                <p:commandButton id="selectButton" 
                action = "#{pacchPerClienteBean.pagModificaPacchPer(riepilogoBean.pacchetto.idPacchPer)}"
                value="Modifica" >  
                </p:commandButton>  
                
      			<p:commandButton value = "Acquista" action="/cliente/acquistaPacchetto?faces-redirect=true" >
      				 <f:setPropertyActionListener value="#{riepilogoBean.pacchetto}" target="#{pacchPerBean.pacchPer}"/>
      			</p:commandButton>
      			
      			
      			<p:commandButton value = "Elimina" type="button" onclick="PF('elimina').show()" />
				<p:confirmDialog message="Sei sicuro di voler eliminare il tuo pacchetto vacanza?"
					header="Cancellazioni pacchetto vacanza" severity="alert"
					widgetVar="elimina">
					<p:commandButton value="Si" actionListener="#{riepilogoBean.removePacchetto}"
					update="messaggi" oncomplete="PF('elimina').hide()"/>
				<p:commandButton value="No" onclick="PF('elimina').hide();" type="button" />
				</p:confirmDialog>
				
				<br/>
			<p:panel rendered = "#{riepilogoBean.creaListaRegali}"> 
				<h:outputText value = "Creando una lista regalo dal pacchetto, hai la possibilità di inviare
				mail ai tuoi amici, chiedendo loro di comprare uno o più prodotti dalla tua lista. 
				In questo modo risparmierai.
				Ricordati, più amici inviti, più probabilità ci sono che compreranno qualcosa e tu 
				spenderai meno per la tua vacanza "/>
				<p:commandButton value = "Crea lista regali" 
				type="button" onclick="PF('lista').show()" />
				<p:confirmDialog message="Sei sicuro di voler creare una lista regali dal pacchetto?"
					header="Creazione lista regali" 
					widgetVar="lista">
					<p:commandButton value="Si, certo" action = "riepilogoBean.creaListaRegali"
					update="messaggi" oncomplete="PF('lista').hide()"/>
				<p:commandButton value="Non ora" onclick="PF('lista').hide();" type="button"/>
				</p:confirmDialog>
			</p:panel>	
				
				<p:panel legend="Crea lista regali" rendered = "#{riepilogoBean.pacchetto.listaRegali}" id = "listaRegali">
					<h:panelGrid column="2">
						<h:outputText value=" 
						Inserisci nel seguente campo l'email di un amico che vuoi informare
						della tua lista regali e poi clicca su invia. " />
						<h:inputText value = "#{pacchPerBean.mailAmico}" />
						<p:commandButton value = "Invia" action = "pacchPerBean.inviaInvitoLista(riepilogoBean.pacchetto.idPacchPer)" 
						update = "messaggi"/>
					</h:panelGrid>
				</p:panel>
				
				<p:panel legend="Invita un amico" id = "invitaAmico">
					<h:panelGrid column="1">
						<h:outputText value="Se pensi che un tuo amico possa essere interessato ad unirsi al
						tuo pacchetto, inviagli una mail per fargli sapere che stai per partire per 
						una splendida vacanza e vorresti che partecipasse anche lui " />
						<h:outputText value = "Inserisci nel campo seguente l'email di un amico, e premi invia " />
						<h:inputText value = "#{pacchPerBean.mailAmico}" />
					<p:commandButton value = "Invia" action = "#{pacchPerBean.inviaInvito(riepilogoBean.pacchetto.idPacchPer)}" 
					update = "messaggi" />
					</h:panelGrid>
				</p:panel>
				
				<p:panel >
				<h:outputText value = "#{riepilogoBean.hotel}" />
					<h:outputText value = "#{riepilogoBean.hotels}" />
				</p:panel>
 			
				
   </p:panel>
           
		</ui:define>

	</ui:composition>

</h:body>
</html>