<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:body>

	<ui:composition template="../template/common.xhtml">

		<ui:define name="content">
		
				<p:panel>

				<p:outputLabel value="Riepilogo pacchetto personalizzato" />
				
				
		<h:form id="form1">  
              
    <p:dataList value="#{riepilogoBean.hotels}" var="hotel" id="hotel"  
        paginator="true" rows="5"  
        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
        rowsPerPageTemplate="5,10,15" type="none">  
  
            <f:facet name="header">  
                Hotel prenotati 
            </f:facet>  
  
            <p:commandButton value = "Mostra Dettagli" update=":form:dettagliHotel" oncomplete="PF('hotelDialog').show()" title="View Detail">  
                <f:setPropertyActionListener value="#{hotel}" target="#{riepilogoBean.selectedHotel}" />  
            </p:commandButton>  
            
            <p:commandButton value = "Acquista" rendered = "#{riepilogoBean.pacchetto.listaRegali}"
            action = "/cliente/acquistaDaListaRegali" >
             <f:setPropertyActionListener value="#{hotel}" target="#{listaRegaliBean.hotel}" />  
            </p:commandButton>
  
            <h:outputText value="#{hotel.citta}, #{hotel.stelle}" style="margin-left:10px" />  
            <br />  
    </p:dataList>  
      
    <p:dialog header="Dettagli Hotel" widgetVar="hotelDialog" modal="true" showEffect="fade">  
        <p:outputPanel id="dettagliHotel" style="text-align:center;" layout="block">  
              
            <h:panelGrid  columns="2" cellpadding="5">  
                <h:outputLabel value="Descrizione: " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.descrizione}" />  
                  
                <h:outputLabel value="Citta': " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.citta}" />  
                  
                 <h:outputLabel value="Data/ora inizio prenotazione: " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.dataPartenza}" />  
                
                 <h:outputLabel value="Data/ora fine prenotazione): " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.dataRitorno}" />  
                
                 <h:outputLabel value="Costo: " />  
                <h:outputText value="#{riepilogoBean.selectedHotel.costo}" />  
                
            </h:panelGrid>  
        </p:outputPanel>  
    </p:dialog>  
  
</h:form>  
		<h:form id="form2">  
              
    <p:dataList value="#{riepilogoBean.hotels}" var="hotel" id="hotel"  
        paginator="true" rows="5"  
        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
        rowsPerPageTemplate="5,10,15" type="none">  
  
            <f:facet name="header">  
                Mezzi di trasporto prenotati 
            </f:facet>  
  
            <p:commandButton value = "Mostra Dettagli" update=":form:dettagliTrasporto" oncomplete="PF('trasportoDialog').show()" title="View Detail">  
                <f:setPropertyActionListener value="#{trasporto}" target="#{riepilogoBean.selectedTrasporto}" />  
            </p:commandButton>  
            
            <p:commandButton value = "Acquista" rendered = "#{riepilogoBean.pacchetto.listaRegali}"
            action = "/cliente/acquistaDaListaRegali" >
             <f:setPropertyActionListener value="#{trasporto}" target="#{listaRegaliBean.trasporto}" />  
            </p:commandButton>
  
            <h:outputText value="#{trasporto.citta}, #{trasporto.stelle}" style="margin-left:10px" />  
            <br />  
    </p:dataList>  
      
    <p:dialog header="Dettagli Trasporto" widgetVar="trasportoDialog" modal="true" showEffect="fade">  
        <p:outputPanel id="dettagliTraporto" style="text-align:center;" layout="block">  
              
            <h:panelGrid  columns="2" cellpadding="5">  
                <h:outputLabel value="Descrizione: " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.descrizione}" />  
                  
                <h:outputLabel value="Citta partenza': " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.cittaPartenza}" />  
                  
                 <h:outputLabel value="Data/ora partenza: " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.dataPartenza}" />  
                
                <h:outputLabel value="Citta arrivo': " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.cittaRitorno}" />  
                
                 <h:outputLabel value="Data/ora arrivo): " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.dataRitorno}" />  
                
                 <h:outputLabel value="Costo: " />  
                <h:outputText value="#{riepilogoBean.selectedTrasporto.costo}" />  
                
            </h:panelGrid>  
        </p:outputPanel>  
    </p:dialog>  
  
</h:form>  

	<h:form id="form3">  
              
    <p:dataList value="#{riepilogoBean.escursioni}" var="escursione" id="escursione"  
        paginator="true" rows="5"  
        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
        rowsPerPageTemplate="5,10,15" type="none">  
  
            <f:facet name="header">  
                Escursioni prenotate 
            </f:facet>  
  
            <p:commandButton value = "Mostra Dettagli" update=":form:dettagliEscursione" oncomplete="PF('escursioneDialog').show()" title="View Detail">  
                <f:setPropertyActionListener value="#{escursione}" target="#{riepilogoBean.selectedEscursione}" />  
            </p:commandButton>  
            
            <p:commandButton value = "Acquista" rendered = "#{riepilogoBean.pacchetto.listaRegali}"
            action = "/cliente/acquistaDaListaRegali" >
             <f:setPropertyActionListener value="#{escursione}" target="#{listaRegaliBean.escursione}" />  
            </p:commandButton>
  
            <h:outputText value="#{escursione.citta}, #{escursione.luogo}" style="margin-left:10px" />  
            <br />  
    </p:dataList>  
      
    <p:dialog header="Dettagli Escursione" widgetVar="escursioneDialog" modal="true" showEffect="fade">  
        <p:outputPanel id="dettagliEscursione" style="text-align:center;" layout="block">  
              
            <h:panelGrid  columns="2" cellpadding="5">  
                <h:outputLabel value="Descrizione: " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.descrizione}" />  
                  
                <h:outputLabel value="Citta': " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.luogo}" />  
                  
                 <h:outputLabel value="Data/ora inizio prenotazione: " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.dataPartenza}" />  
                
                 <h:outputLabel value="Data/ora fine prenotazione): " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.dataRitorno}" />  
                
                 <h:outputLabel value="Costo: " />  
                <h:outputText value="#{riepilogoBean.selectedEscursione.costo}" />  
                
            </h:panelGrid>  
        </p:outputPanel>  
    </p:dialog>  
  
</h:form>  
      		
      			<p:growl id="messaggi"/>
      			
                <p:commandButton id="selectButton" 
                action = "#{pacchPerClienteBean.pagModificaPacchPer(pacchPer.idPacchPer)}"
                value="Modifica" >  
                </p:commandButton>  
                
      			<p:commandButton value = "Acquista" action="/cliente/acquistaPacchetto)">
      				 <f:setPropertyActionListener value="#{riepilogoBean.pacchetto}" target="#{pacchPerBean.pacchPer}"/>
      			</p:commandButton>
      			
      			
      			<p:commandButton value = "Elimina" type="button" onclick="PF('elimina').show()" />
				<p:confirmDialog message="Sei sicuro di voler eliminare il tuo pacchetto vacanza?"
					header="Cancellazioni pacchetto vacanza" severity="alert"
					widgetVar="elimina">
					<p:commandButton value="Si" actionListener="#{riepilogoBean.removePacchetto}"
					update="messaggi" oncomplete="PF('cd').hide()"/>
				<p:commandButton value="No" onclick="PF('cd').hide();" type="button" />
				</p:confirmDialog>
				
				<p:commandButton value = "Crea lista regali" rendered = "{riepilogoBean.pacchetto.listaRegali}"
				type="button" onclick="PF('lista').show()" />
				<p:confirmDialog message="Sei sicuro di voler creare una lista regali dal pacchetto?"
					header="Creazione lista regali" 
					widgetVar="lista">
					<p:commandButton value="Si" 
					update="messaggi" oncomplete="PF('cd').hide()"/>
				<p:commandButton value="Non ora" onclick="PF('cd').hide();" type="button" />
				</p:confirmDialog>
				
				
				<p:panel legend="Crea lista regali" rendered = "#{pacchetto.listaRegali}" id = "listaRegali">
					<h:panelGrid column="2">
						<h:outputText value="Se crei una lista regalo dal pacchetto, potrai inviare una mai
						ai tuoi amici chiedendogli di comprarti un prodotto dalla tua lista.
						Inserisci nel seguente campo l'email di un amico e poi clicca su invia. " />
						<h:inputText value = "#{pacchPerBean.mailAmico}" />
					</h:panelGrid>
				</p:panel>
   </p:panel>
           
		</ui:define>

	</ui:composition>

</h:body>
</html>