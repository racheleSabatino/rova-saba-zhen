<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:body>

	<ui:composition template="../template/common.xhtml">

		<ui:define name="content">
		
				<p:panel>

				<p:outputLabel value="Riepilogo pacchetto personalizzato" />
				
				
		<h:form id="form">  
              
    <p:dataList value="#{riepilogoBean.hotels}" var="hotel" id="hotel"  
        paginator="true" rows="5"  
        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
        rowsPerPageTemplate="5,10,15" type="none">  
  
            <f:facet name="header">  
                Hotel prenotati 
            </f:facet>  
  
            <p:commandButton value = "Mostra Dettagli" update=":form:hotelDetail" oncomplete="PF('hotelDialog').show()" title="View Detail">  
                <f:setPropertyActionListener value="#{hotel}" target="#{riepilogoBean.selectedHotel}" />  
            </p:commandButton>  
            
            <p:commandButton value = "Acquista" type="button" onclick="PF('acquista').show()" />
				<p:confirmDialog message="Sei sicuro di voler procedere all'acquisto del pacchetto?
											L'operazione non puÃ² essere annullata"
					header="Conferma acquisto pacchetto vacanza" severity="alert"
					widgetVar="cd">
					<p:commandButton value="Si, procedo" actionListener="#{pacchPerBean.acquistaPacchetto}"
					update="messages" oncomplete="PF('cd').hide()"/>
					<p:commandButton value="No, continuo in un altro momento" onclick="PF('cd').hide();" type="button" />
				</p:confirmDialog> 
  
            <h:outputText value="#{selectedHotel.citta}, #{selectedHote.stelle}" style="margin-left:10px" />  
            <br />  
    </p:dataList>  
      
    <p:dialog header="Dettagli Hotel" widgetVar="hotelDialog" modal="true" showEffect="fade">  
        <p:outputPanel id="dettagliHotel" style="text-align:center;" layout="block">  
              
            <h:panelGrid  columns="2" cellpadding="5">  
                <h:outputLabel for="descrizione" value="Descrizione: " />  
                <h:outputText id="descrizione" value="#{riepilogoBean.selectedHotel.descrizione}" />  
                  
                <h:outputLabel for="descrizione" value="Citta': " />  
                <h:outputText id="descrizione" value="#{riepilogoBean.selectedHotel.citta}" />  
                  
                 <h:outputLabel for="descrizione" value="Data/ora inizio prenotazione: " />  
                <h:outputText id="descrizione" value="#{riepilogoBean.selectedHotel.dataPartenza}" />  
                
                 <h:outputLabel for="descrizione" value="Data/ora fine prenotazione): " />  
                <h:outputText id="descrizione" value="#{riepilogoBean.selectedHotel.dataRitorno}" />  
                
                 <h:outputLabel for="descrizione" value="Costo: " />  
                <h:outputText id="descrizione" value="#{riepilogoBean.selectedHotel.costo}" />  
                
            </h:panelGrid>  
        </p:outputPanel>  
    </p:dialog>  
  
</h:form>  
			</p:panel>

			<p:panel header="Pacchetto Cliente"> 
                  
      			<h:outputText value="#{pacchPer.idPacchPer}" /> 
      			      			
      			<h:panelGrid columns="3" id="regGrid">
							<h:outputLabel for="id">Id Pacchetto Personalizzato :</h:outputLabel>
							<p:inputText id="id" value="#{riepilogoBean.pacchetto.idPacchPer}" />
							<p:message for="id" />
							<h:outputText />
						</h:panelGrid>

						<p:outputPanel id="resultGrid">
							<p:outputPanel>
									<h:panelGrid columns="1">

									<p:outputLabel
										value="Hotel: #{riepilogoBean.hotel}" />
									<p:outputLabel
										value="Escursioni: #{riepilogoBean.escursione}" />
									<p:outputLabel
										value="Trasporti: #{riepilogoBean.trasporto}" />
										
									<p:outputLabel
										value="Costo totale: #{riepilogoBean.costoTotale}" />	
								
									</h:panelGrid>

							</p:outputPanel>
						</p:outputPanel>
      			
					</p:panel>
      		
      			<p:growl id="messaggi"/>
      			
                <p:commandButton id="selectButton" 
                action = "#{pacchPerClienteBean.pagModificaPacchPer(pacchPer.idPacchPer)}"
                icon="ui-icon-search" value="Modifica" >  
                </p:commandButton>  
                
      			<p:commandButton value = "Acquista" action="/cliente/acquistaPacchetto)">
      				 <f:setPropertyActionListener value="#{riepilogoBean.pacchetto}" target="#{pacchPerBean.pacchPer}"/>
      			</p:commandButton>
      			
      			
      			<p:commandButton value = "Elimina" type="button" onclick="PF('cd').show()" />
				<p:confirmDialog message="Sei sicuro di voler eliminare il tuo pacchetto vacanza?"
					header="Cancellazioni pacchetto vacanza" severity="alert"
					widgetVar="cd">
					<p:commandButton value="Si" actionListener="#{pacchPerClienteBean.removePacchetto}"
					update="messagi" oncomplete="PF('cd').hide()"/>
				<p:commandButton value="No" onclick="PF('cd').hide();" type="button" />
				</p:confirmDialog>
				
				<p:fieldset legend="Crea lista regali" toggleable="true" id = "listaRegali">
					<h:panelGrid column="2">
						<h:outputText value="Se crei una lista regalo dal pacchetto, potrai inviare una mai
						ai tuoi amici chiedendogli di comprarti un prodotto dalla tua lista.
						Inserisci nel seguente campo l'email di un amico e poi clicca su invia. " />
						<h:inputText value = "#{pacchPerBean.mailAmico}" />
					</h:panelGrid>
				</p:fieldset>
   
           
		</ui:define>

	</ui:composition>

</h:body>
</html>